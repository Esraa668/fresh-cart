"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[290],{5290:(b,l,s)=>{s.r(l),s.d(l,{CartComponent:()=>f});var u=s(6814),p=s(1120),t=s(4769),h=s(5371),_=s(2425);function x(i,C){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t._UZ(2,"img",14),t.qZA(),t.TgZ(3,"div",15)(4,"div")(5,"h3",16),t._uU(6),t.qZA(),t.TgZ(7,"p",17),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"button",18,19),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(11),m=t.oxw(2);return t.KtG(m.removeItem(o.product._id,a))}),t._UZ(12,"i",20),t._uU(13,"Remove"),t.qZA()(),t.TgZ(14,"div")(15,"button",21,22),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(16),m=t.MAs(21),g=t.oxw(2);return t.KtG(g.changeCount(o.product._id,o.count-1,a,m))}),t._uU(17,"-"),t.qZA(),t.TgZ(18,"span",23),t._uU(19),t.qZA(),t.TgZ(20,"button",21,24),t.NdJ("click",function(){const o=t.CHM(e).$implicit,a=t.MAs(16),m=t.MAs(21),g=t.oxw(2);return t.KtG(g.changeCount(o.product._id,o.count+1,a,m))}),t._uU(22,"+"),t.qZA()()()()}if(2&i){const e=C.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.hij(" ",e.product.title,""),t.xp6(2),t.hij("Price: ",t.xi3(9,5,e.price,"EGP "),""),t.xp6(11),t.Oqu(e.count)}}const c=function(i){return["/Payment",i]};function d(i,C){if(1&i){const e=t.EpF();t.TgZ(0,"section",2)(1,"h1",3),t._uU(2,"Shop Cart:"),t.qZA(),t.YNc(3,x,23,8,"div",4),t.TgZ(4,"div")(5,"div",5)(6,"div",6)(7,"button",7),t._uU(8,"Online Payment "),t._UZ(9,"img",8),t.qZA()(),t.TgZ(10,"div",6)(11,"p",9),t._uU(12),t.ALo(13,"currency"),t.qZA()()(),t.TgZ(14,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clear())}),t._uU(15," Clear Cart"),t._UZ(16,"i",11),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.cart.products),t.xp6(4),t.Q6J("routerLink",t.VKq(6,c,e.cart._id)),t.xp6(5),t.hij(" Total Price: ",t.xi3(13,3,e.cart.totalCartPrice,"EGP ")," ")}}function v(i,C){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.TgZ(2,"h4",27),t._uU(3," Your Cart Is Free Shop Now!.."),t.qZA()())}let f=(()=>{class i{constructor(e,r,n){this.cartService=e,this.toastr=r,this.renderer2=n,this.cart=null}ngOnInit(){this.cartService.GetCart().subscribe({next:e=>{console.log(e),this.cart=e.data},error:e=>{}})}removeItem(e,r){this.renderer2.setAttribute(r,"disabled","true"),this.cartService.removeCartItem(e).subscribe({next:n=>{this.cart=n.data,this.toastr.warning("Item removed successfully from your cart"),this.renderer2.removeAttribute(r,"disabled"),this.cartService.cartNumber.next(n.numOfCartItems),0===n.numOfCartItems&&(this.cart=null)},error:n=>{this.renderer2.removeAttribute(r,"disabled"),this.toastr.error("An error occurred while removing the item")}})}changeCount(e,r,n,o){r>=1&&(this.renderer2.setAttribute(n,"disabled","true"),this.renderer2.setAttribute(o,"disabled","true"),this.cartService.updateCart(e,r).subscribe({next:a=>{this.cart=a.data,this.renderer2.removeAttribute(n,"disabled"),this.renderer2.removeAttribute(o,"disabled"),console.log(a)},error:a=>{this.renderer2.removeAttribute(n,"disabled"),this.renderer2.removeAttribute(o,"disabled")}}))}clear(){this.cartService.ClearCart().subscribe({next:e=>{"success"===e.message&&(this.cart=null,console.log(e),this.cartService.cartNumber.next(0))},error:e=>{}})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(h.N),t.Y36(_._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","w-75 mx-auto rounded shadow bg-main-light p-3 my-4 ",4,"ngIf","ngIfElse"],["msg",""],[1,"w-75","mx-auto","rounded","shadow","bg-main-light","p-3","my-4"],[1,"h2","text-main"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","row","-0","m-0"],[1,"col-md-6","col-xl-3","col-sm-12"],[1,"text-main","btn-main","text-center","mb-0",3,"routerLink"],["src","./assets/images/visa-1.svg","alt",""],[1,"text-main","btn-main","text-center","mb-0","mt-0"],[1,"fit","mx-auto","text-center","bg-danger","d-block","btn","mt-2","my-2",3,"click"],[1,"fa-solid","fa-trash-arrow-up","px-1"],[1,"row","border-bottom","py-2"],[1,"col-md-3","col-sm-6","mx-auto"],[1,"w-100",3,"src","alt"],[1,"col-md-9","d-flex","justify-content-between","align-items-center","direction"],[1,"h6"],[1,"text-main"],[1,"btn-main","m-1","p-2",3,"click"],["remove",""],[1,"fas","fa-trash-can","p-1"],[1,"btn","btn-sm","border-success",3,"click"],["btnChange1",""],[1,"p-2"],["btnChange2",""],[1,"text-center","pt-0","mb-5"],["src","./assets/images/image.png","alt","cart empty",1,"img"],[1,"text-main","mt-2"]],template:function(r,n){if(1&r&&(t.YNc(0,d,17,8,"section",0),t.YNc(1,v,4,0,"ng-template",null,1,t.W1O)),2&r){const o=t.MAs(2);t.Q6J("ngIf",n.cart)("ngIfElse",o)}},dependencies:[u.ez,u.sg,u.O5,u.H9,p.rH],styles:[".btn-main[_ngcontent-%COMP%]{padding:7px 1px!important;width:100%}@media (max-width: 750px){.direction[_ngcontent-%COMP%]{flex-direction:column!important}}@media (max-width: 460px){section[_ngcontent-%COMP%]{width:100%!important}}.img[_ngcontent-%COMP%]{width:300px!important}@media (max-width: 360px){.img[_ngcontent-%COMP%]{width:200px!important}}"]})}return i})()},5371:(b,l,s)=>{s.d(l,{N:()=>h});var u=s(5619),p=s(4769),t=s(9862);let h=(()=>{class _{constructor(c){this._HttpClient=c,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new u.X(0)}AddToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}GetCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`)}updateCart(c,d){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:d})}ClearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}CheckOut(c,d){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${c}?url=https://esraa668.github.io/fresh-cart/`,{shippingAddress:d})}static#t=this.\u0275fac=function(d){return new(d||_)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);