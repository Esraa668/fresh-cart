"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[80],{5080:(g,u,i)=>{i.r(u),i.d(u,{WishlistComponent:()=>M});var a=i(6814),_=i(1120),t=i(4769),h=i(8777),o=i(5371),C=i(2425);const e=function(n){return{"rating-color":n}};function l(n,p){if(1&n&&t._UZ(0,"i",15),2&n){const s=p.$implicit,r=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,e,r.ratingsAverage>=s))}}const v=function(n){return["/details",n]},f=function(){return[1,2,3,4,5]};function O(n,p){if(1&n){const s=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"i",6),t.NdJ("click",function(){const d=t.CHM(s).$implicit,m=t.oxw(2);return t.KtG(m.removeItem(d._id))}),t.qZA(),t.TgZ(3,"header",7),t._UZ(4,"img",8),t.TgZ(5,"h3",9),t._uU(6),t.qZA(),t.TgZ(7,"div",10)(8,"span"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"p",11),t.YNc(12,l,1,3,"i",12),t.TgZ(13,"span"),t._uU(14),t.qZA()()()(),t.TgZ(15,"footer")(16,"button",13,14),t.NdJ("click",function(){const d=t.CHM(s).$implicit,m=t.MAs(17),x=t.oxw(2);return t.KtG(x.addProduct(d._id,m))}),t._uU(18,"+Add to Cart"),t.qZA()()()()}if(2&n){const s=p.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(11,v,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title)("title",s.title),t.xp6(2),t.Oqu(s.title),t.xp6(3),t.Oqu(t.xi3(10,8,s.price,"E\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(13,f)),t.xp6(2),t.Oqu(s.ratingsAverage)}}function E(n,p){if(1&n&&(t.TgZ(0,"section",1)(1,"div",2),t.YNc(2,O,19,14,"div",3),t.qZA()()),2&n){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.products)}}let M=(()=>{class n{constructor(s,r,c,d){this.wishlistService=s,this.cartService=r,this.toastr=c,this.renderer=d,this.products=[],this.countWish=0}ngOnInit(){this.wishlistService.Getwish().subscribe({next:s=>{this.products=s.data,console.log(s),this.wishlistService.wishNumber.next(s.count)}})}addProduct(s,r){this.renderer.setAttribute(r,"disabled","true"),this.cartService.AddToCart(s).subscribe({next:c=>{this.cartService.cartNumber.next(c.numOfCartItems),this.toastr.success(c.message),this.renderer.removeAttribute(r,"disabled")},error:c=>{console.log(c),this.renderer.removeAttribute(r,"disabled")}})}removeItem(s){this.wishlistService.removeWishItem(s).subscribe({next:r=>{this.products=this.products.filter(c=>c._id!==s),this.wishlistService.wishNumber.next(r.data.length),this.toastr.warning(r.message),console.log(this.products)},error:r=>{console.log(r)}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(h.M),t.Y36(o.N),t.Y36(C._W),t.Y36(t.Qsj))};static#s=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","w-75 mx-auto py-4",4,"ngIf"],[1,"w-75","mx-auto","py-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-3"],[1,"product","h-100","position-relative"],["role","button",1,"fa-solid","fa-xmark","heart","position-absolute",3,"click"],[3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"small"],[1,"d-flex","align-items-center","justify-content-between","py-1"],[1,"mb-0"],["class","fas fa-star",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn-main",3,"click"],["btn",""],[1,"fas","fa-star",3,"ngClass"]],template:function(r,c){1&r&&t.YNc(0,E,3,1,"section",0),2&r&&t.Q6J("ngIf",c.products.length>0)},dependencies:[a.ez,a.mk,a.sg,a.O5,a.H9,_.rH],styles:["header[_ngcontent-%COMP%]{cursor:pointer}.product[_ngcontent-%COMP%]{overflow:hidden}.product[_ngcontent-%COMP%]   .btn-main[_ngcontent-%COMP%]{transform:translateY(150%);width:100%;text-align:center}.product[_ngcontent-%COMP%]:hover   .btn-main[_ngcontent-%COMP%]{transform:translateY(0);transition:all .7s}"]})}return n})()},5371:(g,u,i)=>{i.d(u,{N:()=>h});var a=i(5619),_=i(4769),t=i(9862);let h=(()=>{class o{constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new a.X(0)}AddToCart(e){return this._HttpClient.post(this.baseUrl+"cart",{productId:e})}GetCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(e){return this._HttpClient.delete(this.baseUrl+`cart/${e}`)}updateCart(e,l){return this._HttpClient.put(this.baseUrl+`cart/${e}`,{count:l})}ClearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}CheckOut(e,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${e}?url=https://esraa668.github.io/fresh-cart/`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||o)(_.LFG(t.eN))};static#s=this.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},8777:(g,u,i)=>{i.d(u,{M:()=>h});var a=i(5619),_=i(4769),t=i(9862);let h=(()=>{class o{constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.wishNumber=new a.X(0)}AddTowishlist(e){return this._HttpClient.post(this.baseUrl+"wishlist",{productId:e})}Getwish(){return this._HttpClient.get(this.baseUrl+"wishlist")}removeWishItem(e){return this._HttpClient.delete(this.baseUrl+`wishlist/${e}`)}static#t=this.\u0275fac=function(l){return new(l||o)(_.LFG(t.eN))};static#s=this.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]);