"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[80],{5080:(C,d,s)=>{s.r(d),s.d(d,{WishlistComponent:()=>M});var a=s(6814),_=s(1120),l=s(8129),t=s(4769),o=s(8777),h=s(5371),r=s(2425);const u=function(n){return{"rating-color":n}};function v(n,m){if(1&n&&t._UZ(0,"i",15),2&n){const e=m.$implicit,i=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,u,i.ratingsAverage>=e))}}const f=function(n){return["/details",n]},O=function(){return[1,2,3,4,5]};function x(n,m){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"i",6),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.removeItem(p._id))}),t.qZA(),t.TgZ(3,"header",7),t._UZ(4,"img",8),t.TgZ(5,"h3",9),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"div",10)(9,"span"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"p",11),t.YNc(13,v,1,3,"i",12),t.TgZ(14,"span"),t._uU(15),t.qZA()()()(),t.TgZ(16,"footer")(17,"button",13,14),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.MAs(18),P=t.oxw(2);return t.KtG(P.addProduct(p._id,g))}),t._uU(19,"+Add to Cart"),t.qZA()()()()}if(2&n){const e=m.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(14,f,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("alt",e.title)("title",e.title),t.xp6(2),t.Oqu(t.xi3(7,8,e.title,3)),t.xp6(4),t.Oqu(t.xi3(11,11,e.price,"E\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(16,O)),t.xp6(2),t.Oqu(e.ratingsAverage)}}function E(n,m){if(1&n&&(t.TgZ(0,"section",1)(1,"div",2),t.YNc(2,x,20,17,"div",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.products)}}let M=(()=>{class n{constructor(e,i,c,p){this.wishlistService=e,this.cartService=i,this.toastr=c,this.renderer=p,this.products=[],this.countWish=0}ngOnInit(){this.wishlistService.Getwish().subscribe({next:e=>{this.products=e.data,console.log(e),this.wishlistService.wishNumber.next(e.count)}})}addProduct(e,i){this.renderer.setAttribute(i,"disabled","true"),this.cartService.AddToCart(e).subscribe({next:c=>{this.cartService.cartNumber.next(c.numOfCartItems),this.toastr.success(c.message),this.renderer.removeAttribute(i,"disabled")},error:c=>{console.log(c),this.renderer.removeAttribute(i,"disabled")}})}removeItem(e){this.wishlistService.removeWishItem(e).subscribe({next:i=>{this.products=this.products.filter(c=>c._id!==e),this.wishlistService.wishNumber.next(i.data.length),this.toastr.warning(i.message),console.log(this.products)},error:i=>{console.log(i)}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(o.M),t.Y36(h.N),t.Y36(r._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","w-75 mx-auto py-4",4,"ngIf"],[1,"w-75","mx-auto","py-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-3"],[1,"product","h-100","position-relative"],["role","button",1,"fa-solid","fa-xmark","heart","position-absolute",3,"click"],[3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"small"],[1,"d-flex","align-items-center","justify-content-between","py-1","item"],[1,"mb-0"],["class","fas fa-star",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn-main",3,"click"],["btn",""],[1,"fas","fa-star",3,"ngClass"]],template:function(i,c){1&i&&t.YNc(0,E,3,1,"section",0),2&i&&t.Q6J("ngIf",c.products.length>0)},dependencies:[a.ez,a.mk,a.sg,a.O5,a.H9,_.rH,l.r],styles:["header[_ngcontent-%COMP%]{cursor:pointer}.product[_ngcontent-%COMP%]{overflow:hidden}.product[_ngcontent-%COMP%]   .btn-main[_ngcontent-%COMP%]{transform:translateY(150%);width:100%;text-align:center}.product[_ngcontent-%COMP%]:hover   .btn-main[_ngcontent-%COMP%]{transform:translateY(0);transition:all .7s}@media (max-width: 950px){section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex-direction:column!important}}@media (max-width: 450px){section[_ngcontent-%COMP%]{width:100%!important}}"]})}return n})()},8129:(C,d,s)=>{s.d(d,{r:()=>_});var a=s(4769);let _=(()=>{class l{transform(o,h){return o.split(" ").slice(0,h).join(" ")}static#t=this.\u0275fac=function(h){return new(h||l)};static#e=this.\u0275pipe=a.Yjl({name:"cuttext",type:l,pure:!0,standalone:!0})}return l})()},5371:(C,d,s)=>{s.d(d,{N:()=>t});var a=s(5619),_=s(4769),l=s(9862);let t=(()=>{class o{constructor(r){this._HttpClient=r,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new a.X(0)}AddToCart(r){return this._HttpClient.post(this.baseUrl+"cart",{productId:r})}GetCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(r){return this._HttpClient.delete(this.baseUrl+`cart/${r}`)}updateCart(r,u){return this._HttpClient.put(this.baseUrl+`cart/${r}`,{count:u})}ClearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}CheckOut(r,u){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${r}?url=http://localhost:4200`,{shippingAddress:u})}static#t=this.\u0275fac=function(u){return new(u||o)(_.LFG(l.eN))};static#e=this.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},8777:(C,d,s)=>{s.d(d,{M:()=>t});var a=s(5619),_=s(4769),l=s(9862);let t=(()=>{class o{constructor(r){this._HttpClient=r,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.wishNumber=new a.X(0)}AddTowishlist(r){return this._HttpClient.post(this.baseUrl+"wishlist",{productId:r})}Getwish(){return this._HttpClient.get(this.baseUrl+"wishlist")}removeWishItem(r){return this._HttpClient.delete(this.baseUrl+`wishlist/${r}`)}static#t=this.\u0275fac=function(u){return new(u||o)(_.LFG(l.eN))};static#e=this.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]);